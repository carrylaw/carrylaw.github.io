---
layout: post
title: Python文本预处理方法（文本拆分）待修改
category: anlp
---

&emsp;&emsp;接下来，我们学习如何对文本进行拆分，即存在一个大数据集文本，我们如何将其切分成单个小的数据集。文本拆分适用于在自然语言处理过程中，需要对每通文本进行遍历打标的情况。具体步骤如下：将[原始文本merge.txt]()放在D盘下，并在D盘中新建空白文件夹test     
&emsp;&emsp;文本拆分的**难点**具体包括如下几个部分：    
&emsp;&emsp;（1）原始文本如何按既定规则进行切片；    
&emsp;&emsp;（2）切片后每个新文件的文件名如何写入；   
&emsp;&emsp;（3）如何保证每个新文件中文本的完整性；     
&emsp;&emsp; 注：建议本节与[Python文本合并](https://carrylaw.github.io/anlp/2018/01/18/nlp04/)一同学习     
&emsp;     
&emsp;&emsp;Python文本拆分程序如下:    
``` python
import re
p=re.compile('a',re.S) # 输入正则表达式切片的规则
fileContent=open('d:\\merge.txt','r',encoding='utf-8').read() # 读文件内容
paraList=p.split(fileContent) # 根据正则对文本进行切片

fileWriter=open('d:\\test\\0.txt','w',encoding='utf-8') # 创建一个空白文件
for i in range(len(paraList)): # 遍历切片后的文本列表
    fileWriter.write(paraList[i]) # 将文本写入
    if(i%1==0):# 判断切片大小
        fileWriter.close()
        fileWriter=open('d:\\test\\'+str((i+1)/1)+'.txt','w',encoding='utf-8') # 循环创建空白文件
fileWriter.close()

import re
import os
rootdir = 'd:\\test\\'

p=re.compile('a',re.S) # 输入正则表达式切片的规则
fileContent=open('d:\\merge.txt','r',encoding='utf-8').read() # 读文件内容
paraList=p.split(fileContent) # 根据正则对文本进行切片

for i in range(len(paraList)): # 遍历切片后的文本列表
    fileWriter=open(rootdir+str(i)+'.txt','w',encoding='utf-8') 
    fileWriter.write(paraList[i]) # 将文本写入
    fileWriter.close() 

for root, dirs, files in os.walk(rootdir):
    for l in files:
        l = root + os.path.sep + l
        line = open(l, 'r', encoding='utf-8').readlines()
        infile = ''.join(line[1:])
        outfile = open(str(l),'w',encoding='utf-8').write(infile)
```


